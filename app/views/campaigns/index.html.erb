<div class="grid gap-8 lg:grid-cols-3">
  <section class="lg:col-span-2">
    <div class="rounded-2xl border border-slate-200 bg-white p-8 shadow-sm">
      <div class="flex items-center justify-between">
        <h2 class="text-xl font-semibold text-slate-900">Create campaign</h2>
        <span class="text-xs text-slate-500">Dispatch starts automatically</span>
      </div>

      <% if @campaign.errors.any? %>
        <div class="mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700">
          <p class="font-semibold">Please fix the following:</p>
          <ul class="mt-2 list-disc space-y-1 pl-5">
            <% @campaign.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <%= form_with model: @campaign, class: "mt-6 space-y-6" do |form| %>
        <div>
          <%= form.label :title, class: "text-sm font-medium text-slate-700" %>
          <%= form.text_field :title, class: "mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200", placeholder: "Post-purchase review request" %>
        </div>

        <div>
          <%= form.label :recipients_input, "Recipients", class: "text-sm font-medium text-slate-700" %>
          <p class="mt-1 text-xs text-slate-500">
            One per line. Format: <span class="font-medium">Name, email</span> or <span class="font-medium">Name &lt;email&gt;</span>.
          </p>
          <%= form.text_area :recipients_input, rows: 8, class: "mt-3 w-full rounded-lg border border-slate-200 px-3 py-2 font-mono text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200", placeholder: "Ada Lovelace, ada@example.com\nGrace Hopper, grace@example.com" %>
        </div>

        <div class="flex items-center justify-end">
          <%= form.submit "Launch campaign", class: "inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500" %>
        </div>
      <% end %>
    </div>
  </section>

  <aside>
    <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
      <h3 class="text-base font-semibold text-slate-900">Recent campaigns</h3>
      <p class="mt-1 text-sm text-slate-500">Track progress or review past dispatches.</p>

      <div class="mt-5 space-y-3">
        <% if @campaigns.any? %>
          <% @campaigns.each do |campaign| %>
            <%= link_to campaign_path(campaign), class: "flex items-center justify-between rounded-xl border border-slate-100 px-4 py-3 hover:border-indigo-200 hover:bg-indigo-50" do %>
              <div>
                <p class="text-sm font-semibold text-slate-900"><%= campaign.title %></p>
                <p class="text-xs text-slate-500"><%= campaign.created_at.strftime("%b %d, %Y %H:%M") %></p>
              </div>
              <span class="rounded-full px-3 py-1 text-xs font-semibold <%= status_badge_class(campaign.status) %>">
                <%= campaign.status.capitalize %>
              </span>
            <% end %>
          <% end %>
        <% else %>
          <p class="text-sm text-slate-500">No campaigns yet.</p>
        <% end %>
      </div>
    </div>
  </aside>
</div>

